<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPL Stats Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>üèè IPL Stats Dashboard</h1>
        <form method="POST">
            <div class="mb-3">
                <label for="option" class="form-label">Choose Analysis</label>
                <select name="option" id="option" class="form-select" onchange="showForm(this.value)">
                    <option value="Teams">Teams</option>
                    <option value="Team vs Team">Team vs Team</option>
                    <option value="Team Record">Team Record</option>
                    <option value="Batsman Stats">Batsman Stats</option>
                    <option value="Bowler Stats">Bowler Stats</option>
                </select>
            </div>
            <div id="teams" class="mb-3" style="display: block;">
                <button type="submit" class="btn btn-primary">Get Teams</button>
            </div>
            <div id="team_vs_team" class="mb-3" style="display: none;">
                <div class="row">
                    <div class="col-md-4">
                        <label for="t1" class="form-label">Select Team 1</label>
                        <select name="t1" id="t1" class="form-select">
                            {% for team in teams %}
                                <option value="{{ team }}">{{ team }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label for="t2" class="form-label">Select Team 2</label>
                        <select name="t2" id="t2" class="form-select">
                            {% for team in teams %}
                                <option value="{{ team }}">{{ team }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Compare</button>
            </div>
            <div id="team_record" class="mb-3" style="display: none;">
                <label for="team" class="form-label">Select Team</label>
                <select name="team" id="team" class="form-select">
                    {% for team in teams %}
                        <option value="{{ team }}">{{ team }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn btn-primary">Get Record</button>
            </div>
            <div id="batsman" class="mb-3" style="display: none;">
                <label for="batsman" class="form-label">Select Player</label>
                <select name="batsman" id="batsman" class="form-select">
                    {% for player in all_players %}
                        <option value="{{ player }}">{{ player }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn btn-primary">Get Batsman Stats</button>
            </div>
            <div id="bowler" class="mb-3" style="display: none;">
                <label for="bowler" class="form-label">Select Player</label>
                <select name="bowler" id="bowler" class="form-select">
                    {% for player in all_players %}
                        <option value="{{ player }}">{{ player }}</option>
                    {% endfor %}
                </select>
                <button type="submit" class="btn btn-primary">Get Bowler Stats</button>
            </div>
        </form>
        {% if result %}
            {% if result.type == 'teams' %}
                <h2>All IPL Teams</h2>
                <ul>
                {% for team in result.teams %}
                    <li>{{ team }}</li>
                {% endfor %}
                </ul>
            {% elif result.type == 'team_vs_team' %}
                <h2>Team vs Team Analysis</h2>
                <p>Total Matches: {{ result.total_matches }}</p>
                <p>{{ result.t1 }} Wins: {{ result[result.t1] }}</p>
                <p>{{ result.t2 }} Wins: {{ result[result.t2] }}</p>
                <p>Draws: {{ result.draws }}</p>
            {% elif result.type == 'team_record' %}
                <h2>Overall Record for {{ result.team }}</h2>
                <ul>
                {% for key, value in result[result.team]['Overall'].items() %}
                    <li>{{ key }}: {{ value }}</li>
                {% endfor %}
                </ul>
                <h3>Against Other Teams</h3>
                {% for team, data in result[result.team]['Against'].items() %}
                    <h4>{{ team }}</h4>
                    <ul>
                    {% for k, v in data.items() %}
                        <li>{{ k }}: {{ v }}</li>
                    {% endfor %}
                    </ul>
                {% endfor %}
            {% elif result.type == 'batsman' %}
                <h2>Batsman Performance</h2>
                <h3>{{ result.batsman }}</h3>
                <h4>All Stats</h4>
                <ul>
                {% for key, value in result.data[result.batsman]['all'].items() %}
                    <li>{{ key }}: {{ value }}</li>
                {% endfor %}
                </ul>
                <h4>Against Teams</h4>
                {% for team, stats in result.data[result.batsman]['Against'].items() %}
                    <h5>{{ team }}</h5>
                    <ul>
                    {% for k, v in stats.items() %}
                        <li>{{ k }}: {{ v }}</li>
                    {% endfor %}
                    </ul>
                {% endfor %}
            {% elif result.type == 'bowler' %}
                <h2>Bowler Performance</h2>
                <h3>{{ result.bowler }}</h3>
                <h4>All Stats</h4>
                <ul>
                {% for key, value in result.data[result.bowler]['all'].items() %}
                    <li>{{ key }}: {{ value }}</li>
                {% endfor %}
                </ul>
                <h4>Against Teams</h4>
                {% for team, stats in result.data[result.bowler]['Against'].items() %}
                    <h5>{{ team }}</h5>
                    <ul>
                    {% for k, v in stats.items() %}
                        <li>{{ k }}: {{ v }}</li>
                    {% endfor %}
                    </ul>
                {% endfor %}
            {% endif %}
        {% endif %}
        <a href="/" class="btn btn-secondary mt-3">Back to Home</a>
    </div>
    <script>
        function showForm(option) {
            document.getElementById('teams').style.display = option === 'Teams' ? 'block' : 'none';
            document.getElementById('team_vs_team').style.display = option === 'Team vs Team' ? 'block' : 'none';
            document.getElementById('team_record').style.display = option === 'Team Record' ? 'block' : 'none';
            document.getElementById('batsman').style.display = option === 'Batsman Stats' ? 'block' : 'none';
            document.getElementById('bowler').style.display = option === 'Bowler Stats' ? 'block' : 'none';
        }
    </script>
</body>
</html>